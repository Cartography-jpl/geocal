from .nitf_tre import *
from .nitf_tre_rsmapb import *
from test_support import *
import io, six

def test_tre_rsmapb():

    gsapids = ['OFFX', 'OFFY', 'OFFZ', 'ROTX', 'ROTY', 'ROTZ', 'SCAL',
               'XRTX', 'XRTY', 'XRTZ', 'YRTZ', 'YRTY', 'YRTZ',
               'ZRTX', 'ZRTY', 'ZRTZ']

    t = TreRSMAPB()
    t.iid = 'abc'
    t.edition = 'abc'
    t.tid = 'cde'
    t.npar = 36
    t.aptyp = 'G'
    t.loctyp = 'R'

    t.nsfx = 0.1234567890
    t.nsfy = 0.1234567890
    t.nsfz = 0.1234567890
    t.noffx = 0.1234567890
    t.noffy = 0.1234567890
    t.noffz = 0.1234567890

    t.xuol = 0.1234567890
    t.yuol = 0.1234567890
    t.zuol = 0.1234567890
    t.xuxl = 0.1234567890
    t.xuyl = 0.1234567890
    t.xuzl = 0.1234567890
    t.yuxl = 0.1234567890
    t.yuyl = 0.1234567890
    t.yuzl = 0.1234567890
    t.zuxl = 0.1234567890
    t.zuyl = 0.1234567890
    t.zuzl = 0.1234567890

    t.apbase = 'Y'

    t.ngsap = 16
    for a in range (t.ngsap):
        t.gsapid[a] = gsapids[a]

    if (t.aptyp == 'G'):
        count = t.npar * t.ngsap
    else:
        count = t.npar * t.nisap
    for a in range (count):
        t.ael[a] = 0.1234567890

    for a in range(t.npar):
        t.parval[a] = 0.1234567890

    fh = six.BytesIO()
    t.write_to_file(fh)
    #print(fh.getvalue())

    assert fh.getvalue() == b'RSMAPB13461abc                                                                             abc                                     cde                                     36GR+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01Y16OFFXOFFYOFFZROTXROTYROTZSCALXRTXXRTYXRTZYRTZYRTYYRTZZRTXZRTYZRTZ+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01+1.23456789000000E-01'
    fh2 = six.BytesIO(fh.getvalue())
    t2 = TreRSMAPB()
    t2.read_from_file(fh2)
    assert t.iid == 'abc'
    assert t.edition == 'abc'
    assert t.tid == 'cde'
    assert t.npar == 36
    assert t.aptyp == 'G'
    assert t.loctyp == 'R'

    assert t.nsfx == 0.1234567890
    assert t.nsfy == 0.1234567890
    assert t.nsfz == 0.1234567890
    assert t.noffx == 0.1234567890
    assert t.noffy == 0.1234567890
    assert t.noffz == 0.1234567890

    assert t.xuol == 0.1234567890
    assert t.yuol == 0.1234567890
    assert t.zuol == 0.1234567890
    assert t.xuxl == 0.1234567890
    assert t.xuyl == 0.1234567890
    assert t.xuzl == 0.1234567890
    assert t.yuxl == 0.1234567890
    assert t.yuyl == 0.1234567890
    assert t.yuzl == 0.1234567890
    assert t.zuxl == 0.1234567890
    assert t.zuyl == 0.1234567890
    assert t.zuzl == 0.1234567890

    assert t.apbase == 'Y'

    assert t.ngsap == 16
    for a in range(t.ngsap):
        assert t.gsapid[a] == gsapids[a]

    if (t.aptyp == 'G'):
        count = t.npar * t.ngsap
    else:
        count = t.npar * t.nisap
    for a in range(count):
        assert t.ael[a] == 0.1234567890

    for a in range(t.npar):
        assert t.parval[a] == 0.1234567890

# Tests for other parts
